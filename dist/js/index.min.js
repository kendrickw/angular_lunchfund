(function(){var a=angular.module("copyright",[]);a.directive("copyright",function(){return{scope:{},restrict:"AE",templateUrl:"templates/copyright.html",replace:!0,controller:"CopyrightController",controllerAs:"CopyrightCtrl"}});a.controller("CopyrightController",["$window",function(a){angular.extend(this,{COPYRIGHT_TEXT:a.COPYRIGHT_TEXT})}])})();(function(){var a=angular.module("fundForm",["globalFactory","alertService"]);a.directive("fundForm",function(){return{scope:{},restrict:"AE",templateUrl:"templates/fundform.html",replace:!0,controller:"FundController",controllerAs:"FundCtrl"}});a.controller("FundController",["$http","global","alert",function(a,f,d){function c(){return b.billAmount?b.fundholder?b.attendee().length?!0:(b.alert.add("danger","No one is going to lunch?"),!1):(b.alert.add("danger","Please specify a fundholder."),!1):(b.alert.add("danger",
"Bill Amount '"+b.billAmount+"' is not valid."),!1)}var b=this;angular.extend(b,{alert:d,today:new Date,eventdate:new Date,attendee:function(){return f.get("attendee")},billAmount:"",tipsAmount:0,totalAmount:0,tipPercent:10,eachPays:0,fundholder:"",dateOpened:!1,dateOptions:{"show-weeks":!1,"max-mode":"day"}});var g=0;angular.extend(b,{dateOpen:function(c){c.preventDefault();c.stopPropagation();b.dateOpened=!0},getLunchfundAmount:function(){if(b.billAmount){b.totalAmount=Math.ceil(1.1*b.billAmount);
b.tipsAmount=b.totalAmount-b.billAmount;b.tipPercent=b.tipsAmount/b.billAmount*100;var c=b.attendee().length;0<c&&(b.eachPays=Math.ceil(b.totalAmount/c));g=b.eachPays*c-b.totalAmount}return g},submit:function(){var d={time:b.eventdate,bill:b.billAmount,totalpaid:b.totalAmount,fund:g,attendee:b.attendee(),fundholder:b.fundholder,submitter:f.get("loginUser")};c()&&a.post("db/event",d).success(function(c){f.get("events").unshift(d);b.alert.add("success","Lunchfund submitted successfully.")}).error(function(c,
d,a,f){b.alert.add("danger",JSON.stringify(c))})}})}])})();(function(){angular.module("globalFactory",[]).factory("global",["$window","$http",function(a,e){var f={locale:navigator.languages?navigator.languages[0]:navigator.language||navigator.userLanguage,currentPageID:0,development:a.development,loginUser:a.currentuser,lunchers:[],attendee:[],events:[]};e.get("/db/lunchers").success(function(d){var c=f.lunchers,b=f.attendee,a=f.loginUser,e;for(e=0;e<d.length;e+=1)5>e&&b.push(d[e]),c.push(d[e]),d[e].firstname===a.firstname&&d[e].lastname===a.lastname&&angular.extend(a,
d[e])});e.get("/db/events",{params:{count:2}}).success(function(a){f.events=a});return{get:function(a){return f[a]},set:function(a,c){f[a]=c}}}])})();(function(){angular.module("index","ui.bootstrap ui.router titleMenu luncherSelect fundForm pastEvent copyright".split(" ")).config(["$stateProvider","$urlRouterProvider",function(a,e){e.otherwise("/home");a.state("home",{url:"/home",templateUrl:"templates/home.html"}).state("dashboard",{url:"/dashboard",templateUrl:"templates/dashboard.html"}).state("setting",{url:"/setting",templateUrl:"templates/setting.html"})}])})();(function(){var a=angular.module("luncherSelect",["globalFactory"]);a.directive("luncherSelect",function(){return{scope:{},restrict:"AE",templateUrl:"templates/luncherselect.html",replace:!0,controller:"LuncherController",controllerAs:"LuncherCtrl"}});a.controller("LuncherController",["$scope","$modal","global",function(a,f,d){var c=this;angular.extend(c,{editMode:!1,lunchers:function(){return d.get("lunchers")},attendee:function(){return d.get("attendee")}});angular.extend(c,{toggleEdit:function(){c.editMode=
!c.editMode},isAttending:function(b){return-1!==c.attendee().indexOf(b)},toggle:function(b){var a=c.attendee().indexOf(b);-1!==a?c.attendee().splice(a,1):c.attendee().push(b)}})}])})();(function(){var a=angular.module("pastEvent",["globalFactory"]);a.directive("pastEvent",function(){return{scope:{},restrict:"AE",templateUrl:"templates/pastevent.html",replace:!0,controller:"EventController",controllerAs:"EventCtrl"}});a.controller("EventController",["global",function(a){this.events=function(){return a.get("events")}}])})();(function(){var a=angular.module("titleMenu",["ngAside","globalFactory"]);a.directive("titleMenu",function(){return{scope:{},restrict:"AE",templateUrl:"templates/titleMenu.html",replace:!0,controller:"MenuController",controllerAs:"MenuCtrl"}});var e=[{id:0,name:"Home",description:"",icon:"glyphicon glyphicon-home",link:"#/home"},{id:1,name:"Dashboard",description:"Show lunchfund performance",icon:"glyphicon glyphicon-dashboard",link:"#/dashboard"},{id:2,name:"Settings",description:"",icon:"glyphicon glyphicon-cog",
link:"#/setting"}];a.controller("MenuController",["$aside","global",function(a,d){var c=this;angular.extend(c,{allPages:e,development:d.get("development"),currentPageID:function(){return d.get("currentPageID")},loginUser:function(){return d.get("loginUser")}});angular.extend(c,{openAside:function(b){a.open({templateUrl:"templates/sidemenu.html",placement:b,size:"sm",backdrop:!0,controller:"SidemenuController",controllerAs:"SidemenuCtrl"})},getPage:function(){return c.allPages[c.currentPageID()]}})}]);
a.controller("SidemenuController",["global","$modalInstance",function(a,d){angular.extend(this,{ok:function(a){d.close();a.stopPropagation()},cancel:function(a){d.dismiss();a.stopPropagation()},allPages:e,setPage:function(c){a.set("currentPageID",c||0)}})}])})();
